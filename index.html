<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Bib Seat Information System - Regensburg</title>
  <meta name="description" content="">
  <meta name="author" content="Regensburg">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width = device-width, initial-scale = 1.0">

  <link rel="stylesheet" href="css/style.css">

</head>

<script src="js/scripts.js"></script>


<!-- Starts clock on site load -->
<body onload="startTime()">

  <div id="time"></div>
  <div class="siteContainer">



    <div id='titleContainer'>

      <h1>Sitzplatz Auskunftssystem</h1>

      <h1>Bibliothek OTH Regensburg</h1>

      <h2><code>Sybothstraße</code></h2>

      <h2>Aktuell <span id="openingStatus">geschlossen</span></h2>

      <h2 id="seadsInfo">Anzahl freier Sitzplätze: <span id="seadsFree"></span>/8</h2>

      <br>
      <hr>
      <br>
      <span id="room1" class="rooms" onclick="chooseRoom(this)">Erdgeschoss (EG)<br><font size="5px">(<span id="room1overviewFree">2</span> von 4 frei)</font></span>
      <span id="room2" class="rooms" onclick="chooseRoom(this)">Untergeschoss (UG)<br><font size="5px">(<span id="room2overviewFree">2</span> von 4 frei)</font></span>

      <br><br>

      <div id="viewRoom1">
        <div><h3>Freie Sitzplätze im <u><i>Erdgeschoss</i></u>: <span id="viewRoom1SeadsFree">2</span> (von insgesamt 4 Sitzplätzen)</h3></div>
        <br>
        <div id="seat1" class="seat free" onclick="handleSeatInfo(this)">Sitzplatz 1 <p id="seat1Label">FREI</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup1"  class="seatPopup seatFree" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 1 <br>
          <b>Status: <span id="seatPopup1Label">FREI</span> </b><br>
          Steckdosen: 0 <br>
        </code>
        <div id="seat2" class="seat taken" onclick="handleSeatInfo(this)">Sitzplatz 2 <p id="seat2Label">BELEGT</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup2"  class="seatPopup seatTaken" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 2 <br>
          <b>Status: <span id="seatPopup2Label">BELEGT</span> </b><br>
          Steckdosen: 0 <br>
        </code>
        <div id="seat3" class="seat taken" onclick="handleSeatInfo(this)">Sitzplatz 3 <p id="seat3Label">BELEGT</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup3"  class="seatPopup seatTaken" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 3 <br>
          <b>Status: <span id="seatPopup3Label">BELEGT</span> </b><br>
          Steckdosen: 1 <br>
        </code>
        <div id="seat4" class="seat free" onclick="handleSeatInfo(this)">Sitzplatz 4 <p id="seat4Label">FREI</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup4"  class="seatPopup seatFree" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 4 <br>
          <b>Status: <span id="seatPopup4Label">FREI</span> </b><br>
          Steckdosen: 2 <br>
        </code>
      </div>

      <div id="viewRoom2" style="display: none;">
        <div><h3>Freie Sitzplätze im <u><i>Untergeschoss</i></u>: <span id="viewRoom2SeadsFree">2</span> (von insgesamt 4 Sitzplätzen)</h3></div>
        <br>
        <div id="seat5" class="seat taken" onclick="handleSeatInfo(this)">Sitzplatz 5 <p id="seat5Label">BELEGT</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup5"  class="seatPopup seatTaken" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 5 <br>
          <b>Status: <span id="seatPopup5Label">BELEGT</span> </b><br>
          Steckdosen: 2 <br>
        </code>
        <div id="seat6" class="seat free" onclick="handleSeatInfo(this)">Sitzplatz 6 <p id="seat6Label">FREI</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup6"  class="seatPopup seatFree" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 6 <br>
          <b>Status: <span id="seatPopup6Label">FREI</span> </b><br>
          Steckdosen: 1 <br>
        </code>
        <div id="seat7" class="seat free" onclick="handleSeatInfo(this)">Sitzplatz 7 <p id="seat7Label">FREI</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup7"  class="seatPopup seatFree" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 7 <br>
          <b>Status: <span id="seatPopup7Label">FREI</span> </b><br>
          Steckdosen: 0 <br>
        </code>
        <div id="seat8" class="seat taken" onclick="handleSeatInfo(this)">Sitzplatz 8 <p id="seat8Label">BELEGT</p> <p>&gt;&gt; INFO &lt;&lt;</p></div>
        <code id="seatPopup8"  class="seatPopup seatTaken" onclick="hideSeatInfo(this)">
          Sitzplatz-Nr: 8 <br>
          <b>Status: <span id="seatPopup8Label">BELEGT</span> </b><br>
          Steckdosen: 0 <br>
        </code>
      </div>

      <br><br><br><br><br><br>
      <div><a href="https://www.oth-regensburg.de/hochschule/einrichtungen/hochschulbibliothek/oeffnungszeiten.html" target="_blank">Hier</a> gehts zum Überblick der Öffnungszeiten.</div>

</div>

  </div>



</body>

<script>

  document.onreadystatechange = function () {
     if (document.readyState == "complete") {

       document.getElementById('seadsFree').innerHTML = 4;
       document.getElementById('seadsInfo').style.color = "green";


       // ?token=demo&s1=1&s2=1&s3=1&s4=0
       // ?token=demo&s1=1&s2=1&s3=1&s4=0&s5=1&s6=1&s7=0&s8=0

       // Demo input for sensor data
       var token = getParameterByName("token", document.location.href); // security token (demo only)
       var s1 = getParameterByName("s1", document.location.href); // status of seat 1
       var s2 = getParameterByName("s2", document.location.href); // status of seat 2
       var s3 = getParameterByName("s3", document.location.href); // status of seat 3
       var s4 = getParameterByName("s4", document.location.href); // status of seat 4
       var s5 = getParameterByName("s5", document.location.href); // status of seat 5
       var s6 = getParameterByName("s6", document.location.href); // status of seat 6
       var s7 = getParameterByName("s7", document.location.href); // status of seat 7
       var s8 = getParameterByName("s8", document.location.href); // status of seat 8
       var total = getParameterByName("total", document.location.href); // total seats
       var f = getParameterByName("f", document.location.href); // number of free seats
       var feg;
       var fug;

       if (token === "demo") {
         if (total == null) {
           total = 500;
         }
         // Ergeschoss (standarmäßig frei)
         if (s1 === null) {
           s1 = 0;
         }
         if (s2 === null) {
           s2 = 0;
         }
         if (s3 === null) {
           s3 = 0;
         }
         if (s4 === null) {
           s4 = 0;
         }

         // Untergeschoss (standarmäßig belegt)
         if (s5 === null) {
           s5 = 1;
         }
         if (s6 === null) {
           s6 = 1;
         }
         if (s7 === null) {
           s7 = 1;
         }
         if (s8 === null) {
           s8 = 1;
         }

         feg = parseInt(s1)+parseInt(s2)+parseInt(s3)+parseInt(s4)
         fug = parseInt(s5)+parseInt(s6)+parseInt(s7)+parseInt(s8);

         if (f === null) {
           f = feg + fug;
         }

        document.getElementById("viewRoom1SeadsFree").innerHTML = feg;
        document.getElementById("viewRoom2SeadsFree").innerHTML = fug;
        document.getElementById("room1overviewFree").innerHTML = feg;
        document.getElementById("room2overviewFree").innerHTML = fug;

         if (f < 1) {
           document.getElementById('seadsFree').innerHTML = f;
           document.getElementById('seadsInfo').style.color = "red";
         } else {
           document.getElementById('seadsFree').innerHTML = f;
           document.getElementById('seadsInfo').style.color = "green";
         }



         setSeatStatus(1, s1);
         setSeatStatus(2, s2);
         setSeatStatus(3, s3);
         setSeatStatus(4, s4);
         setSeatStatus(5, s5);
         setSeatStatus(6, s6);
         setSeatStatus(7, s7);
         setSeatStatus(8, s8);

   }
 }



  }

  function setSeatStatus(seatNumber, status) {
    if (status == 1) {
      console.log("Sitznumer:" + seatNumber + " Status: " + status + " (FREI)");
      document.getElementById("seat" + seatNumber + "Label").innerHTML = "FREI";
      document.getElementById("seatPopup" + seatNumber + "Label").innerHTML = "FREI";
      document.getElementById("seatPopup" + seatNumber).classList.remove("seatTaken");
      document.getElementById("seatPopup" + seatNumber).classList.add("seatFree");
      document.getElementById("seat" + seatNumber).classList.remove("taken");
      document.getElementById("seat" + seatNumber).classList.add("free");
    } else if (status == 0) {
      console.log("Sitznumer:" + seatNumber + " Status: " + status + " (BELEGT)");
      document.getElementById("seat" + seatNumber + "Label").innerHTML = "BELEGT";
      document.getElementById("seatPopup" + seatNumber + "Label").innerHTML = "BELEGT";
      document.getElementById("seatPopup" + seatNumber).classList.remove("seatFree");
      document.getElementById("seatPopup" + seatNumber).classList.add("seatTaken");
      document.getElementById("seat" + seatNumber).classList.remove("free");
      document.getElementById("seat" + seatNumber).classList.add("taken");
    }

  }
</script>


</html>
